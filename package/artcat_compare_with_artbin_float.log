-------------------------------------------------------------------------------
      name:  <unnamed>
       log:  c:\ado\ian\artcat\package\artcat_compare_with_artbin_float.log
  log type:  text
 opened on:  20 Jun 2022, 12:45:22

. /* 
> Validation code for the STATA program artcat
> Created by Ella Marley-Zagar, 11 June 2020
> Last updated: 06 Jan 2021
> 1jun2022: 
>         extracted artbin comparison and created master.do
>         renamed compare_with_artbin.do
>         updated for artbin v2
> */
. 
. ******************************************
. ******************************************
. * Testing: Sample size calculations
. ******************************************
. ******************************************
. 
. 
. **********************************
. * Superiority Binary Outcome
. **********************************
. 
. /* from draft artcat paper:
> artbin reports method NN, unless the  option is used, in which case it report
> s method NA.
> Power is assessed by artbin, using the default method which assumes local alt
> ernatives (variance type NN) and the alternative method
> assuming distant alternatives (variance type NA).
> **** in artbin superiority, the default is distant ****
> local: NN
> distant: NA
> */
. 
. 
. * p = 90%, d = 20%, α = 10%, β = 10%
. * Distant / NA
. artbin, pr(0.1 0.3) alpha(0.1) power(0.9)  // 133

ART - ANALYSIS OF RESOURCES FOR TRIALS (binary version 2.0 08nov2021)
------------------------------------------------------------------------------
A sample size program by Abdel Babiker, Patrick Royston, Friederike Barthel, 
Ella Marley-Zagar and Ian White
MRC Clinical Trials Unit at UCL, London WC1V 6LJ, UK.
------------------------------------------------------------------------------
Type of trial                          superiority
Number of groups                       2
Favourable/unfavourable outcome        favourable
                                       Inferred by the program
Allocation ratio                       equal group sizes
Statistical test assumed               unconditional comparison of 2
                                        binomial proportions P1 and P2
                                        using the score test
Local or distant                       distant
Continuity correction                  no

Anticipated event probabilities        0.100 , 0.300 

Alpha                                  0.100 (two-sided)
                                       (taken as .05 one-sided)
Power (designed)                       0.900

Total sample size (calculated)         134

Sample size per group (calculated)     67 67
Expected total number of events        26.80    
------------------------------------------------------------------------------

. local n0 = r(n)

. artcat, pc(.1) pe(.3) alpha(0.1) power(.9) probtable ologit(NA) fav // 131

ART - ANALYSIS OF RESOURCES FOR TRIALS (categorical version 1.1.1 20jun2022)
----------------------------------------------------------------------------
A sample size program by Ian White with input and support from
Ella Marley-Zagar, Tim Morris, Max Parmar, Patrick Royston and Ab Babiker.
MRC Clinical Trials Unit at UCL, London WC1V 6LJ, UK.
----------------------------------------------------------------------------
Type of trial                           superiority
Favourable/unfavourable outcome         favourable
Null hypothesis                         odds ratio = 1
Superiority region                      odds ratio > 1
Allocation ratio C:E                    1:1
Anticipated probabilities, control arm  .1
                   experimental arm     .3 
Anticipated average odds ratio          3.857

Table of anticipated probabilities      C      E    
                    1 most favourable   0.100  0.300
                    2 least favourable  0.900  0.700

Alpha                                   0.100 (two-sided)
Power (designed)                        0.900
Method                                  ologit (variance NA)

Total sample size (calculated)          132
Sample size per group (calculated)      66 66
----------------------------------------------------------------------------

. local absdif1dist = abs(r(n_ologit_NA) - `n0')

. di `absdif1dist'
2

. assert `absdif1dist' < 10

. 
. * Local / NN
. artbin, pr(0.1 0.3) alpha(0.1) power(0.9) local // 138

ART - ANALYSIS OF RESOURCES FOR TRIALS (binary version 2.0 08nov2021)
------------------------------------------------------------------------------
A sample size program by Abdel Babiker, Patrick Royston, Friederike Barthel, 
Ella Marley-Zagar and Ian White
MRC Clinical Trials Unit at UCL, London WC1V 6LJ, UK.
------------------------------------------------------------------------------
Type of trial                          superiority
Number of groups                       2
Favourable/unfavourable outcome        favourable
                                       Inferred by the program
Allocation ratio                       equal group sizes
Statistical test assumed               unconditional comparison of 2
                                        binomial proportions P1 and P2
                                        using the score test
Local or distant                       local
Continuity correction                  no

Anticipated event probabilities        0.100 , 0.300 

Alpha                                  0.100 (two-sided)
                                       (taken as .05 one-sided)
Power (designed)                       0.900

Total sample size (calculated)         138

Sample size per group (calculated)     69 69
Expected total number of events        27.60    
------------------------------------------------------------------------------

. local n1 = r(n)

. artcat, pc(.1) pe(.3)  alpha(0.1) power(.9) probtable ologit(NN) fav // 118

ART - ANALYSIS OF RESOURCES FOR TRIALS (categorical version 1.1.1 20jun2022)
----------------------------------------------------------------------------
A sample size program by Ian White with input and support from
Ella Marley-Zagar, Tim Morris, Max Parmar, Patrick Royston and Ab Babiker.
MRC Clinical Trials Unit at UCL, London WC1V 6LJ, UK.
----------------------------------------------------------------------------
Type of trial                           superiority
Favourable/unfavourable outcome         favourable
Null hypothesis                         odds ratio = 1
Superiority region                      odds ratio > 1
Allocation ratio C:E                    1:1
Anticipated probabilities, control arm  .1
                   experimental arm     .3 
Anticipated average odds ratio          3.857

Table of anticipated probabilities      C      E    
                    1 most favourable   0.100  0.300
                    2 least favourable  0.900  0.700

Alpha                                   0.100 (two-sided)
Power (designed)                        0.900
Method                                  ologit (variance NN)

Total sample size (calculated)          118
Sample size per group (calculated)      59 59
----------------------------------------------------------------------------

. local absdif1loc = abs(r(n_ologit_NN) - `n1')

. di `absdif1loc'
20

. assert `absdif1loc' < 10                                                     
>     /***********  ASSERTION FALSE, DIFFERENCE OF 20 ***********/
assertion is false
r(9);

. 
. 
. * p1 = 90%, p2 = 95%, α = 5%, β = 10%
. * Distant / NA
. artbin, pr(0.05 0.1) alpha(0.05) power(0.9)  // 1162

ART - ANALYSIS OF RESOURCES FOR TRIALS (binary version 2.0 08nov2021)
------------------------------------------------------------------------------
A sample size program by Abdel Babiker, Patrick Royston, Friederike Barthel, 
Ella Marley-Zagar and Ian White
MRC Clinical Trials Unit at UCL, London WC1V 6LJ, UK.
------------------------------------------------------------------------------
Type of trial                          superiority
Number of groups                       2
Favourable/unfavourable outcome        favourable
                                       Inferred by the program
Allocation ratio                       equal group sizes
Statistical test assumed               unconditional comparison of 2
                                        binomial proportions P1 and P2
                                        using the score test
Local or distant                       distant
Continuity correction                  no

Anticipated event probabilities        0.050 , 0.100 

Alpha                                  0.050 (two-sided)
                                       (taken as .025 one-sided)
Power (designed)                       0.900

Total sample size (calculated)         1164

Sample size per group (calculated)     582 582
Expected total number of events        87.30    
------------------------------------------------------------------------------

. local n2 = r(n)

. artcat, pc(.05) pe(.1) alpha(0.05) power(.9) probtable ologit(NA) // 1134

ART - ANALYSIS OF RESOURCES FOR TRIALS (categorical version 1.1.1 20jun2022)
----------------------------------------------------------------------------
A sample size program by Ian White with input and support from
Ella Marley-Zagar, Tim Morris, Max Parmar, Patrick Royston and Ab Babiker.
MRC Clinical Trials Unit at UCL, London WC1V 6LJ, UK.
----------------------------------------------------------------------------
Type of trial                           superiority
Favourable/unfavourable outcome         favourable
                                        inferred by the program
Null hypothesis                         odds ratio = 1
Superiority region                      odds ratio > 1
Allocation ratio C:E                    1:1
Anticipated probabilities, control arm  .05
                   experimental arm     .1 
Anticipated average odds ratio          2.111

Table of anticipated probabilities      C      E    
                    1 most favourable   0.050  0.100
                    2 least favourable  0.950  0.900

Alpha                                   0.050 (two-sided)
Power (designed)                        0.900
Method                                  ologit (variance NA)

Total sample size (calculated)          1134
Sample size per group (calculated)      567 567
----------------------------------------------------------------------------

. local absdif2dist = abs(r(n_ologit_NA) - `n2')                               
>     

. di `absdif2dist'
30

. assert `absdif2dist' < 10                                                    
>     /***********  ASSERTION FALSE, DIFFERENCE OF 28 ***********/
assertion is false
r(9);

. 
. * Local / NN
. artbin, pr(0.05 0.1) alpha(0.05) power(0.9) local // 1167

ART - ANALYSIS OF RESOURCES FOR TRIALS (binary version 2.0 08nov2021)
------------------------------------------------------------------------------
A sample size program by Abdel Babiker, Patrick Royston, Friederike Barthel, 
Ella Marley-Zagar and Ian White
MRC Clinical Trials Unit at UCL, London WC1V 6LJ, UK.
------------------------------------------------------------------------------
Type of trial                          superiority
Number of groups                       2
Favourable/unfavourable outcome        favourable
                                       Inferred by the program
Allocation ratio                       equal group sizes
Statistical test assumed               unconditional comparison of 2
                                        binomial proportions P1 and P2
                                        using the score test
Local or distant                       local
Continuity correction                  no

Anticipated event probabilities        0.050 , 0.100 

Alpha                                  0.050 (two-sided)
                                       (taken as .025 one-sided)
Power (designed)                       0.900

Total sample size (calculated)         1168

Sample size per group (calculated)     584 584
Expected total number of events        87.60    
------------------------------------------------------------------------------

. local n3 = r(n)

. artcat, pc(.05) pe(.1) alpha(0.05) power(.9) probtable ologit(NN) fav // 1086

ART - ANALYSIS OF RESOURCES FOR TRIALS (categorical version 1.1.1 20jun2022)
----------------------------------------------------------------------------
A sample size program by Ian White with input and support from
Ella Marley-Zagar, Tim Morris, Max Parmar, Patrick Royston and Ab Babiker.
MRC Clinical Trials Unit at UCL, London WC1V 6LJ, UK.
----------------------------------------------------------------------------
Type of trial                           superiority
Favourable/unfavourable outcome         favourable
Null hypothesis                         odds ratio = 1
Superiority region                      odds ratio > 1
Allocation ratio C:E                    1:1
Anticipated probabilities, control arm  .05
                   experimental arm     .1 
Anticipated average odds ratio          2.111

Table of anticipated probabilities      C      E    
                    1 most favourable   0.050  0.100
                    2 least favourable  0.950  0.900

Alpha                                   0.050 (two-sided)
Power (designed)                        0.900
Method                                  ologit (variance NN)

Total sample size (calculated)          1086
Sample size per group (calculated)      543 543
----------------------------------------------------------------------------

. local absdif2loc = abs(r(n_ologit_NN) - `n3')  

. di `absdif2loc'                                                              
>      
82

. assert `absdif2loc' < 10                                                     
>     /***********  ASSERTION FALSE, DIFFERENCE OF 81 ***********/
assertion is false
r(9);

. 
. 
. * p1 = 90%, p2 = 80%, α = 10%, β = 20%
. * Distant / NA
. artbin, pr(0.1 0.2) alpha(0.1) power(0.8)  // 313

ART - ANALYSIS OF RESOURCES FOR TRIALS (binary version 2.0 08nov2021)
------------------------------------------------------------------------------
A sample size program by Abdel Babiker, Patrick Royston, Friederike Barthel, 
Ella Marley-Zagar and Ian White
MRC Clinical Trials Unit at UCL, London WC1V 6LJ, UK.
------------------------------------------------------------------------------
Type of trial                          superiority
Number of groups                       2
Favourable/unfavourable outcome        favourable
                                       Inferred by the program
Allocation ratio                       equal group sizes
Statistical test assumed               unconditional comparison of 2
                                        binomial proportions P1 and P2
                                        using the score test
Local or distant                       distant
Continuity correction                  no

Anticipated event probabilities        0.100 , 0.200 

Alpha                                  0.100 (two-sided)
                                       (taken as .05 one-sided)
Power (designed)                       0.800

Total sample size (calculated)         314

Sample size per group (calculated)     157 157
Expected total number of events        47.10    
------------------------------------------------------------------------------

. local n4 = r(n)

. artcat, pc(.1) pe(.2) alpha(0.1) power(.8) probtable ologit(NA) fav // 306

ART - ANALYSIS OF RESOURCES FOR TRIALS (categorical version 1.1.1 20jun2022)
----------------------------------------------------------------------------
A sample size program by Ian White with input and support from
Ella Marley-Zagar, Tim Morris, Max Parmar, Patrick Royston and Ab Babiker.
MRC Clinical Trials Unit at UCL, London WC1V 6LJ, UK.
----------------------------------------------------------------------------
Type of trial                           superiority
Favourable/unfavourable outcome         favourable
Null hypothesis                         odds ratio = 1
Superiority region                      odds ratio > 1
Allocation ratio C:E                    1:1
Anticipated probabilities, control arm  .1
                   experimental arm     .2 
Anticipated average odds ratio          2.250

Table of anticipated probabilities      C      E    
                    1 most favourable   0.100  0.200
                    2 least favourable  0.900  0.800

Alpha                                   0.100 (two-sided)
Power (designed)                        0.800
Method                                  ologit (variance NA)

Total sample size (calculated)          306
Sample size per group (calculated)      153 153
----------------------------------------------------------------------------

. local absdif3dist = abs(r(n_ologit_NA) - `n4') 

. di `absdif3dist'                                  
8

. assert `absdif3dist' < 10

. 
. * Local / NN
. artbin, pr(0.1 0.2) alpha(0.1) power(0.8) local // 316

ART - ANALYSIS OF RESOURCES FOR TRIALS (binary version 2.0 08nov2021)
------------------------------------------------------------------------------
A sample size program by Abdel Babiker, Patrick Royston, Friederike Barthel, 
Ella Marley-Zagar and Ian White
MRC Clinical Trials Unit at UCL, London WC1V 6LJ, UK.
------------------------------------------------------------------------------
Type of trial                          superiority
Number of groups                       2
Favourable/unfavourable outcome        favourable
                                       Inferred by the program
Allocation ratio                       equal group sizes
Statistical test assumed               unconditional comparison of 2
                                        binomial proportions P1 and P2
                                        using the score test
Local or distant                       local
Continuity correction                  no

Anticipated event probabilities        0.100 , 0.200 

Alpha                                  0.100 (two-sided)
                                       (taken as .05 one-sided)
Power (designed)                       0.800

Total sample size (calculated)         316

Sample size per group (calculated)     158 158
Expected total number of events        47.40    
------------------------------------------------------------------------------

. local n5 = r(n)

. artcat, pc(.1) pe(.2) alpha(0.1) power(.8) probtable ologit(NN) fav // 295

ART - ANALYSIS OF RESOURCES FOR TRIALS (categorical version 1.1.1 20jun2022)
----------------------------------------------------------------------------
A sample size program by Ian White with input and support from
Ella Marley-Zagar, Tim Morris, Max Parmar, Patrick Royston and Ab Babiker.
MRC Clinical Trials Unit at UCL, London WC1V 6LJ, UK.
----------------------------------------------------------------------------
Type of trial                           superiority
Favourable/unfavourable outcome         favourable
Null hypothesis                         odds ratio = 1
Superiority region                      odds ratio > 1
Allocation ratio C:E                    1:1
Anticipated probabilities, control arm  .1
                   experimental arm     .2 
Anticipated average odds ratio          2.250

Table of anticipated probabilities      C      E    
                    1 most favourable   0.100  0.200
                    2 least favourable  0.900  0.800

Alpha                                   0.100 (two-sided)
Power (designed)                        0.800
Method                                  ologit (variance NN)

Total sample size (calculated)          296
Sample size per group (calculated)      148 148
----------------------------------------------------------------------------

. local absdif3loc = abs(r(n_ologit_NN) - `n5')  

. di `absdif3loc'                                
20

. assert `absdif3loc' < 10                                                     
>     /***********  ASSERTION FALSE, DIFFERENCE OF 21 ***********/
assertion is false
r(9);

.                                                       
. 
. * Substantial-superiority
. artcat, pc(.4 .2) margin(0.1) or(0.05) power(.8) probtable ologit unfavourabl
> e

ART - ANALYSIS OF RESOURCES FOR TRIALS (categorical version 1.1.1 20jun2022)
----------------------------------------------------------------------------
A sample size program by Ian White with input and support from
Ella Marley-Zagar, Tim Morris, Max Parmar, Patrick Royston and Ab Babiker.
MRC Clinical Trials Unit at UCL, London WC1V 6LJ, UK.
----------------------------------------------------------------------------
Type of trial                           substantial-superiority
Favourable/unfavourable outcome         unfavourable
Null hypothesis                         odds ratio = 0.100
Substantial-superiority region          odds ratio < 0.100
Allocation ratio C:E                    1:1
Anticipated probabilities, control arm  .4 .2
                   experimental arm     given by odds ratio = 0.050

Table of anticipated probabilities      C      E      E null
                    1 least favourable  0.400  0.032  0.063
                    2                   0.200  0.038  0.068
                    3 most favourable   0.400  0.930  0.870

Alpha                                   0.050 (two-sided)
Power (designed)                        0.800
Method                                  ologit (variance NA)

Total sample size (calculated)          510
Sample size per group (calculated)      255 255
----------------------------------------------------------------------------

. 
. * Testing onesided
. *********************
. 
. * p = 90%, d = 20%, α = 5% onesided, β = 10%
. * Distant / NA
. artbin, pr(0.1 0.3) alpha(0.05) power(0.9)  onesided(1) // 133

ART - ANALYSIS OF RESOURCES FOR TRIALS (binary version 2.0 08nov2021)
------------------------------------------------------------------------------
A sample size program by Abdel Babiker, Patrick Royston, Friederike Barthel, 
Ella Marley-Zagar and Ian White
MRC Clinical Trials Unit at UCL, London WC1V 6LJ, UK.
------------------------------------------------------------------------------
Type of trial                          superiority
Number of groups                       2
Favourable/unfavourable outcome        favourable
                                       Inferred by the program
Allocation ratio                       equal group sizes
Statistical test assumed               unconditional comparison of 2
                                        binomial proportions P1 and P2
                                        using the score test
Local or distant                       distant
Continuity correction                  no

Anticipated event probabilities        0.100 , 0.300 

Alpha                                  0.050 (one-sided)
Power (designed)                       0.900

Total sample size (calculated)         134

Sample size per group (calculated)     67 67
Expected total number of events        26.80    
------------------------------------------------------------------------------

. local n12 = r(n)

. artcat, pc(.1) pe(.3) alpha(0.05) power(.9) probtable ologit(NA) onesided fav
>  // 131

ART - ANALYSIS OF RESOURCES FOR TRIALS (categorical version 1.1.1 20jun2022)
----------------------------------------------------------------------------
A sample size program by Ian White with input and support from
Ella Marley-Zagar, Tim Morris, Max Parmar, Patrick Royston and Ab Babiker.
MRC Clinical Trials Unit at UCL, London WC1V 6LJ, UK.
----------------------------------------------------------------------------
Type of trial                           superiority
Favourable/unfavourable outcome         favourable
Null hypothesis                         odds ratio = 1
Superiority region                      odds ratio > 1
Allocation ratio C:E                    1:1
Anticipated probabilities, control arm  .1
                   experimental arm     .3 
Anticipated average odds ratio          3.857

Table of anticipated probabilities      C      E    
                    1 most favourable   0.100  0.300
                    2 least favourable  0.900  0.700

Alpha                                   0.050 (one-sided)
Power (designed)                        0.900
Method                                  ologit (variance NA)

Total sample size (calculated)          132
Sample size per group (calculated)      66 66
----------------------------------------------------------------------------

. local absdif12dist = abs(r(n_ologit_NA) - `n12')

. di `absdif12dist'
2

. assert `absdif12dist' < 10

. 
. 
. * p1 = 90%, p2 = 80%, α = 5% onesided, β = 20%
. * Distant / NA
. artbin, pr(0.1 0.2) alpha(0.05) power(0.8)  onesided(1) // 313

ART - ANALYSIS OF RESOURCES FOR TRIALS (binary version 2.0 08nov2021)
------------------------------------------------------------------------------
A sample size program by Abdel Babiker, Patrick Royston, Friederike Barthel, 
Ella Marley-Zagar and Ian White
MRC Clinical Trials Unit at UCL, London WC1V 6LJ, UK.
------------------------------------------------------------------------------
Type of trial                          superiority
Number of groups                       2
Favourable/unfavourable outcome        favourable
                                       Inferred by the program
Allocation ratio                       equal group sizes
Statistical test assumed               unconditional comparison of 2
                                        binomial proportions P1 and P2
                                        using the score test
Local or distant                       distant
Continuity correction                  no

Anticipated event probabilities        0.100 , 0.200 

Alpha                                  0.050 (one-sided)
Power (designed)                       0.800

Total sample size (calculated)         314

Sample size per group (calculated)     157 157
Expected total number of events        47.10    
------------------------------------------------------------------------------

. local n13 = r(n)

. artcat, pc(.1) pe(.2) alpha(0.05) power(.8) probtable ologit(NA) onesided fav
>  // 306

ART - ANALYSIS OF RESOURCES FOR TRIALS (categorical version 1.1.1 20jun2022)
----------------------------------------------------------------------------
A sample size program by Ian White with input and support from
Ella Marley-Zagar, Tim Morris, Max Parmar, Patrick Royston and Ab Babiker.
MRC Clinical Trials Unit at UCL, London WC1V 6LJ, UK.
----------------------------------------------------------------------------
Type of trial                           superiority
Favourable/unfavourable outcome         favourable
Null hypothesis                         odds ratio = 1
Superiority region                      odds ratio > 1
Allocation ratio C:E                    1:1
Anticipated probabilities, control arm  .1
                   experimental arm     .2 
Anticipated average odds ratio          2.250

Table of anticipated probabilities      C      E    
                    1 most favourable   0.100  0.200
                    2 least favourable  0.900  0.800

Alpha                                   0.050 (one-sided)
Power (designed)                        0.800
Method                                  ologit (variance NA)

Total sample size (calculated)          306
Sample size per group (calculated)      153 153
----------------------------------------------------------------------------

. local absdif13dist = abs(r(n_ologit_NA) - `n13') 

. di `absdif13dist'                                  
8

. assert `absdif13dist' < 10

. 
. 
. * Testing aratios
. ********************* 
. 
. * p = 90%, d = 20%, α = 5%, β = 10%
. * Distant / NA
. artbin, pr(0.1 0.3) alpha(0.05) power(0.9) aratios(1 2)   // 188

ART - ANALYSIS OF RESOURCES FOR TRIALS (binary version 2.0 08nov2021)
------------------------------------------------------------------------------
A sample size program by Abdel Babiker, Patrick Royston, Friederike Barthel, 
Ella Marley-Zagar and Ian White
MRC Clinical Trials Unit at UCL, London WC1V 6LJ, UK.
------------------------------------------------------------------------------
Type of trial                          superiority
Number of groups                       2
Favourable/unfavourable outcome        favourable
                                       Inferred by the program
Allocation ratio                       1:2
Statistical test assumed               unconditional comparison of 2
                                        binomial proportions P1 and P2
                                        using the score test
Local or distant                       distant
Continuity correction                  no

Anticipated event probabilities        0.100 , 0.300 

Alpha                                  0.050 (two-sided)
                                       (taken as .025 one-sided)
Power (designed)                       0.900

Total sample size (calculated)         189

Sample size per group (calculated)     63 126
Expected total number of events        44.10    
------------------------------------------------------------------------------

. local n14 = r(n)

. artcat, pc(.1) pe(.3) alpha(0.05) power(.9) probtable ologit(NA) aratio(1 2) 
> fav  // 178

ART - ANALYSIS OF RESOURCES FOR TRIALS (categorical version 1.1.1 20jun2022)
----------------------------------------------------------------------------
A sample size program by Ian White with input and support from
Ella Marley-Zagar, Tim Morris, Max Parmar, Patrick Royston and Ab Babiker.
MRC Clinical Trials Unit at UCL, London WC1V 6LJ, UK.
----------------------------------------------------------------------------
Type of trial                           superiority
Favourable/unfavourable outcome         favourable
Null hypothesis                         odds ratio = 1
Superiority region                      odds ratio > 1
Allocation ratio C:E                    1:2
Anticipated probabilities, control arm  .1
                   experimental arm     .3 
Anticipated average odds ratio          3.857

Table of anticipated probabilities      C      E    
                    1 most favourable   0.100  0.300
                    2 least favourable  0.900  0.700

Alpha                                   0.050 (two-sided)
Power (designed)                        0.900
Method                                  ologit (variance NA)

Total sample size (calculated)          179
Sample size per group (calculated)      60 119
----------------------------------------------------------------------------

. local absdif14dist = abs(r(n_ologit_NA) - `n14')

. di `absdif14dist'
10

. assert `absdif14dist' < 10                                                   
>     /***********  ASSERTION FALSE, DIFFERENCE OF 10 ***********/
assertion is false
r(9);

. 
. 
. * p1 = 90%, p2 = 80%, α = 5%, β = 20%
. * Distant / NA
. artbin, pr(0.1 0.2) alpha(0.05) power(0.8) aratios(1 3)  // 555

ART - ANALYSIS OF RESOURCES FOR TRIALS (binary version 2.0 08nov2021)
------------------------------------------------------------------------------
A sample size program by Abdel Babiker, Patrick Royston, Friederike Barthel, 
Ella Marley-Zagar and Ian White
MRC Clinical Trials Unit at UCL, London WC1V 6LJ, UK.
------------------------------------------------------------------------------
Type of trial                          superiority
Number of groups                       2
Favourable/unfavourable outcome        favourable
                                       Inferred by the program
Allocation ratio                       1:3
Statistical test assumed               unconditional comparison of 2
                                        binomial proportions P1 and P2
                                        using the score test
Local or distant                       distant
Continuity correction                  no

Anticipated event probabilities        0.100 , 0.200 

Alpha                                  0.050 (two-sided)
                                       (taken as .025 one-sided)
Power (designed)                       0.800

Total sample size (calculated)         556

Sample size per group (calculated)     139 417
Expected total number of events        97.30    
------------------------------------------------------------------------------

. local n15 = r(n)

. artcat, pc(.1) pe(.2) alpha(0.05) power(.8) probtable ologit(NA) aratio(1 3) 
> fav // 495

ART - ANALYSIS OF RESOURCES FOR TRIALS (categorical version 1.1.1 20jun2022)
----------------------------------------------------------------------------
A sample size program by Ian White with input and support from
Ella Marley-Zagar, Tim Morris, Max Parmar, Patrick Royston and Ab Babiker.
MRC Clinical Trials Unit at UCL, London WC1V 6LJ, UK.
----------------------------------------------------------------------------
Type of trial                           superiority
Favourable/unfavourable outcome         favourable
Null hypothesis                         odds ratio = 1
Superiority region                      odds ratio > 1
Allocation ratio C:E                    1:3
Anticipated probabilities, control arm  .1
                   experimental arm     .2 
Anticipated average odds ratio          2.250

Table of anticipated probabilities      C      E    
                    1 most favourable   0.100  0.200
                    2 least favourable  0.900  0.800

Alpha                                   0.050 (two-sided)
Power (designed)                        0.800
Method                                  ologit (variance NA)

Total sample size (calculated)          495
Sample size per group (calculated)      124 371
----------------------------------------------------------------------------

. local absdif15dist = abs(r(n_ologit_NA) - `n15') 

. di `absdif15dist'                                  
61

. assert `absdif15dist' < 10                                                   
>     /***********  ASSERTION FALSE, DIFFERENCE OF 60 ***********/
assertion is false
r(9);

. 
. 
. ******************************************
. ******************************************
. * Testing 2: Power calculations
. ******************************************
. ******************************************
. 
. 
. 
. **********************************
. * Superiority Binary Outcome
. **********************************
. 
. 
. 
. * p1 = 95%, p2 = 83%, α = 5%, n=515
. * Distant / NA
. artbin, pr(0.05 0.17) alpha(0.05) n(515)  // 0.993

ART - ANALYSIS OF RESOURCES FOR TRIALS (binary version 2.0 08nov2021)
------------------------------------------------------------------------------
A sample size program by Abdel Babiker, Patrick Royston, Friederike Barthel, 
Ella Marley-Zagar and Ian White
MRC Clinical Trials Unit at UCL, London WC1V 6LJ, UK.
------------------------------------------------------------------------------
Type of trial                          superiority
Number of groups                       2
Favourable/unfavourable outcome        favourable
                                       Inferred by the program
Allocation ratio                       equal group sizes
Statistical test assumed               unconditional comparison of 2
                                        binomial proportions P1 and P2
                                        using the score test
Local or distant                       distant
Continuity correction                  no

Anticipated event probabilities        0.050 , 0.170 

Alpha                                  0.050 (two-sided)
                                       (taken as .025 one-sided)
Power (calculated)                     0.993

Total sample size (designed)           515

Sample size per group (designed)       257.5 257.5
Expected total number of events        56.65    
------------------------------------------------------------------------------

. local n6 = r(power)

. artcat, pc(0.05) pe(0.17) alpha(0.05) n(515) probtable ologit(NA) fav // 0.99
> 3

ART - ANALYSIS OF RESOURCES FOR TRIALS (categorical version 1.1.1 20jun2022)
----------------------------------------------------------------------------
A sample size program by Ian White with input and support from
Ella Marley-Zagar, Tim Morris, Max Parmar, Patrick Royston and Ab Babiker.
MRC Clinical Trials Unit at UCL, London WC1V 6LJ, UK.
----------------------------------------------------------------------------
Type of trial                           superiority
Favourable/unfavourable outcome         favourable
Null hypothesis                         odds ratio = 1
Superiority region                      odds ratio > 1
Allocation ratio C:E                    1:1
Anticipated probabilities, control arm  .05
                   experimental arm     .17 
Anticipated average odds ratio          3.892

Table of anticipated probabilities      C      E    
                    1 most favourable   0.050  0.170
                    2 least favourable  0.950  0.830

Alpha                                   0.050 (two-sided)
Total sample size (designed)            515
Method                                  ologit (variance NA)

Power (calculated)                      0.993
----------------------------------------------------------------------------

. local absdif4dist = abs(r(power) - `n6')

. di `absdif4dist'
.0000702

. assert `absdif4dist' < 0.01

. 
. * Local / NN
. artbin, pr(0.05 0.17) alpha(0.05) n(515) local // 0.992

ART - ANALYSIS OF RESOURCES FOR TRIALS (binary version 2.0 08nov2021)
------------------------------------------------------------------------------
A sample size program by Abdel Babiker, Patrick Royston, Friederike Barthel, 
Ella Marley-Zagar and Ian White
MRC Clinical Trials Unit at UCL, London WC1V 6LJ, UK.
------------------------------------------------------------------------------
Type of trial                          superiority
Number of groups                       2
Favourable/unfavourable outcome        favourable
                                       Inferred by the program
Allocation ratio                       equal group sizes
Statistical test assumed               unconditional comparison of 2
                                        binomial proportions P1 and P2
                                        using the score test
Local or distant                       local
Continuity correction                  no

Anticipated event probabilities        0.050 , 0.170 

Alpha                                  0.050 (two-sided)
                                       (taken as .025 one-sided)
Power (calculated)                     0.992

Total sample size (designed)           515

Sample size per group (designed)       257.5 257.5
Expected total number of events        56.65    
------------------------------------------------------------------------------

. local n7 = r(power)

. artcat, pc(0.05) pe(0.17) alpha(0.05) n(515) probtable ologit(NN) fav // 0.99
> 8

ART - ANALYSIS OF RESOURCES FOR TRIALS (categorical version 1.1.1 20jun2022)
----------------------------------------------------------------------------
A sample size program by Ian White with input and support from
Ella Marley-Zagar, Tim Morris, Max Parmar, Patrick Royston and Ab Babiker.
MRC Clinical Trials Unit at UCL, London WC1V 6LJ, UK.
----------------------------------------------------------------------------
Type of trial                           superiority
Favourable/unfavourable outcome         favourable
Null hypothesis                         odds ratio = 1
Superiority region                      odds ratio > 1
Allocation ratio C:E                    1:1
Anticipated probabilities, control arm  .05
                   experimental arm     .17 
Anticipated average odds ratio          3.892

Table of anticipated probabilities      C      E    
                    1 most favourable   0.050  0.170
                    2 least favourable  0.950  0.830

Alpha                                   0.050 (two-sided)
Total sample size (designed)            515
Method                                  ologit (variance NN)

Power (calculated)                      0.998
----------------------------------------------------------------------------

. local absdif5dist = abs(r(power) - `n7')

. di `absdif5dist'
.00629324

. assert `absdif5dist' < 0.01

. 
.                                                   
. * p1 = 90%, p2 = 80%, α = 10%, n=310
. * Distant / NA
. artbin, pr(0.1 0.2) alpha(0.1) n(310)  // 0.796

ART - ANALYSIS OF RESOURCES FOR TRIALS (binary version 2.0 08nov2021)
------------------------------------------------------------------------------
A sample size program by Abdel Babiker, Patrick Royston, Friederike Barthel, 
Ella Marley-Zagar and Ian White
MRC Clinical Trials Unit at UCL, London WC1V 6LJ, UK.
------------------------------------------------------------------------------
Type of trial                          superiority
Number of groups                       2
Favourable/unfavourable outcome        favourable
                                       Inferred by the program
Allocation ratio                       equal group sizes
Statistical test assumed               unconditional comparison of 2
                                        binomial proportions P1 and P2
                                        using the score test
Local or distant                       distant
Continuity correction                  no

Anticipated event probabilities        0.100 , 0.200 

Alpha                                  0.100 (two-sided)
                                       (taken as .05 one-sided)
Power (calculated)                     0.796

Total sample size (designed)           310

Sample size per group (designed)       155 155
Expected total number of events        46.50    
------------------------------------------------------------------------------

. local n8 = r(power)

. artcat, pc(0.1) pe(0.2) alpha(0.1) n(310) probtable ologit(NA) fav // 0.805

ART - ANALYSIS OF RESOURCES FOR TRIALS (categorical version 1.1.1 20jun2022)
----------------------------------------------------------------------------
A sample size program by Ian White with input and support from
Ella Marley-Zagar, Tim Morris, Max Parmar, Patrick Royston and Ab Babiker.
MRC Clinical Trials Unit at UCL, London WC1V 6LJ, UK.
----------------------------------------------------------------------------
Type of trial                           superiority
Favourable/unfavourable outcome         favourable
Null hypothesis                         odds ratio = 1
Superiority region                      odds ratio > 1
Allocation ratio C:E                    1:1
Anticipated probabilities, control arm  .1
                   experimental arm     .2 
Anticipated average odds ratio          2.250

Table of anticipated probabilities      C      E    
                    1 most favourable   0.100  0.200
                    2 least favourable  0.900  0.800

Alpha                                   0.100 (two-sided)
Total sample size (designed)            310
Method                                  ologit (variance NA)

Power (calculated)                      0.805
----------------------------------------------------------------------------

. local absdif6dist = abs(r(power) - `n8')

. di `absdif6dist'
.0085974

. assert `absdif6dist' < 0.01

. 
. * Local / NN
. artbin, pr(0.1 0.2) alpha(0.1) n(310) local // 0.794

ART - ANALYSIS OF RESOURCES FOR TRIALS (binary version 2.0 08nov2021)
------------------------------------------------------------------------------
A sample size program by Abdel Babiker, Patrick Royston, Friederike Barthel, 
Ella Marley-Zagar and Ian White
MRC Clinical Trials Unit at UCL, London WC1V 6LJ, UK.
------------------------------------------------------------------------------
Type of trial                          superiority
Number of groups                       2
Favourable/unfavourable outcome        favourable
                                       Inferred by the program
Allocation ratio                       equal group sizes
Statistical test assumed               unconditional comparison of 2
                                        binomial proportions P1 and P2
                                        using the score test
Local or distant                       local
Continuity correction                  no

Anticipated event probabilities        0.100 , 0.200 

Alpha                                  0.100 (two-sided)
                                       (taken as .05 one-sided)
Power (calculated)                     0.794

Total sample size (designed)           310

Sample size per group (designed)       155 155
Expected total number of events        46.50    
------------------------------------------------------------------------------

. local n9 = r(power)

. artcat, pc(0.1) pe(0.2) alpha(0.1) n(310) probtable ologit(NN) fav // 0.817

ART - ANALYSIS OF RESOURCES FOR TRIALS (categorical version 1.1.1 20jun2022)
----------------------------------------------------------------------------
A sample size program by Ian White with input and support from
Ella Marley-Zagar, Tim Morris, Max Parmar, Patrick Royston and Ab Babiker.
MRC Clinical Trials Unit at UCL, London WC1V 6LJ, UK.
----------------------------------------------------------------------------
Type of trial                           superiority
Favourable/unfavourable outcome         favourable
Null hypothesis                         odds ratio = 1
Superiority region                      odds ratio > 1
Allocation ratio C:E                    1:1
Anticipated probabilities, control arm  .1
                   experimental arm     .2 
Anticipated average odds ratio          2.250

Table of anticipated probabilities      C      E    
                    1 most favourable   0.100  0.200
                    2 least favourable  0.900  0.800

Alpha                                   0.100 (two-sided)
Total sample size (designed)            310
Method                                  ologit (variance NN)

Power (calculated)                      0.817
----------------------------------------------------------------------------

. local absdif7dist = abs(r(power) - `n9')

. di `absdif7dist'
.02300922

. assert `absdif7dist' < 0.01                                                  
>     /***********  ASSERTION FALSE, DIFFERENCE OF 0.023 ***********/
assertion is false
r(9);

. 
. 
. * p1 = 92%, p2 = 89%, α = 5%, n=5000
. * Distant / NA
. artbin, pr(0.08 0.11) alpha(0.05) n(5000)  // 0.951

ART - ANALYSIS OF RESOURCES FOR TRIALS (binary version 2.0 08nov2021)
------------------------------------------------------------------------------
A sample size program by Abdel Babiker, Patrick Royston, Friederike Barthel, 
Ella Marley-Zagar and Ian White
MRC Clinical Trials Unit at UCL, London WC1V 6LJ, UK.
------------------------------------------------------------------------------
Type of trial                          superiority
Number of groups                       2
Favourable/unfavourable outcome        favourable
                                       Inferred by the program
Allocation ratio                       equal group sizes
Statistical test assumed               unconditional comparison of 2
                                        binomial proportions P1 and P2
                                        using the score test
Local or distant                       distant
Continuity correction                  no

Anticipated event probabilities        0.080 , 0.110 

Alpha                                  0.050 (two-sided)
                                       (taken as .025 one-sided)
Power (calculated)                     0.951

Total sample size (designed)           5000

Sample size per group (designed)       2500 2500
Expected total number of events        475.00   
------------------------------------------------------------------------------

. local n10 = r(power)

. artcat, pc(0.08) pe(0.11) alpha(0.05) n(5000) probtable ologit(NA) fav // 0.9
> 52

ART - ANALYSIS OF RESOURCES FOR TRIALS (categorical version 1.1.1 20jun2022)
----------------------------------------------------------------------------
A sample size program by Ian White with input and support from
Ella Marley-Zagar, Tim Morris, Max Parmar, Patrick Royston and Ab Babiker.
MRC Clinical Trials Unit at UCL, London WC1V 6LJ, UK.
----------------------------------------------------------------------------
Type of trial                           superiority
Favourable/unfavourable outcome         favourable
Null hypothesis                         odds ratio = 1
Superiority region                      odds ratio > 1
Allocation ratio C:E                    1:1
Anticipated probabilities, control arm  .08
                   experimental arm     .11 
Anticipated average odds ratio          1.421

Table of anticipated probabilities      C      E    
                    1 most favourable   0.080  0.110
                    2 least favourable  0.920  0.890

Alpha                                   0.050 (two-sided)
Total sample size (designed)            5000
Method                                  ologit (variance NA)

Power (calculated)                      0.952
----------------------------------------------------------------------------

. local absdif8dist = abs(r(power) - `n10')

. di `absdif8dist'
.00063026

. assert `absdif8dist' < 0.01

. 
. * Local / NN
. artbin, pr(0.08 0.11) alpha(0.05) n(5000) local // 0.951

ART - ANALYSIS OF RESOURCES FOR TRIALS (binary version 2.0 08nov2021)
------------------------------------------------------------------------------
A sample size program by Abdel Babiker, Patrick Royston, Friederike Barthel, 
Ella Marley-Zagar and Ian White
MRC Clinical Trials Unit at UCL, London WC1V 6LJ, UK.
------------------------------------------------------------------------------
Type of trial                          superiority
Number of groups                       2
Favourable/unfavourable outcome        favourable
                                       Inferred by the program
Allocation ratio                       equal group sizes
Statistical test assumed               unconditional comparison of 2
                                        binomial proportions P1 and P2
                                        using the score test
Local or distant                       local
Continuity correction                  no

Anticipated event probabilities        0.080 , 0.110 

Alpha                                  0.050 (two-sided)
                                       (taken as .025 one-sided)
Power (calculated)                     0.951

Total sample size (designed)           5000

Sample size per group (designed)       2500 2500
Expected total number of events        475.00   
------------------------------------------------------------------------------

. local n11 = r(power)

. artcat, pc(0.08) pe(0.11) alpha(0.05) n(5000) probtable ologit(NN) fav // 0.9
> 54

ART - ANALYSIS OF RESOURCES FOR TRIALS (categorical version 1.1.1 20jun2022)
----------------------------------------------------------------------------
A sample size program by Ian White with input and support from
Ella Marley-Zagar, Tim Morris, Max Parmar, Patrick Royston and Ab Babiker.
MRC Clinical Trials Unit at UCL, London WC1V 6LJ, UK.
----------------------------------------------------------------------------
Type of trial                           superiority
Favourable/unfavourable outcome         favourable
Null hypothesis                         odds ratio = 1
Superiority region                      odds ratio > 1
Allocation ratio C:E                    1:1
Anticipated probabilities, control arm  .08
                   experimental arm     .11 
Anticipated average odds ratio          1.421

Table of anticipated probabilities      C      E    
                    1 most favourable   0.080  0.110
                    2 least favourable  0.920  0.890

Alpha                                   0.050 (two-sided)
Total sample size (designed)            5000
Method                                  ologit (variance NN)

Power (calculated)                      0.954
----------------------------------------------------------------------------

. local absdif9dist = abs(r(power) - `n11')

. di `absdif9dist'
.00273008

. assert `absdif9dist' < 0.01    

. 
. 
. 
. 
. 
end of do-file
      name:  <unnamed>
       log:  c:\ado\ian\artcat\package\artcat_compare_with_artbin_float.log
  log type:  text
 closed on:  20 Jun 2022, 12:45:24
-------------------------------------------------------------------------------
